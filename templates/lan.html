{% extends '_layout.html' %}

{% from '_layout.html' import jsonld_organization, base_jsonld_schema with context %}

{% block title %}2ème LAN annuelle{% endblock %}

{% block description %}Infos à propos de la LAN annuelle organisée par la team {{ team_name }}{% endblock %}

{% block canonical_url %}{{ url('/lan', absolute=True) }}{% endblock %}

{% block jsonld_schema %}
    {{ base_jsonld_schema|dictmerge({
        'about': {
            '@type': 'SocialEvent',
            'name': self.title(),
            'description': self.title(),
            'image': self.image(),
            'eventAttendanceMode': 'https://schema.org/OfflineEventAttendanceMode',
            'organizer': jsonld_organization,
            'startDate': start_date.isoformat(),
            'endDate': end_date.isoformat(),
            'location': locations,
            'maximumAttendeeCapacity': max_attendees,
            'remainingAttendeeCapacity': max_attendees - current_attendees,
        },
    })|tojsonm }}
{% endblock %}

{% block cssfiles %}
    {% assets 'css_lan' %}<link rel="stylesheet" href="{{ ASSET_URL }}">{% endassets %}
{% endblock %}

{% block content %}
    <p>Comme chaque année depuis 2023, nous organisons une LAN party privée dont voici les informations à propos de l'édition de cette année. <strong>Il n'est possible de la joindre que sur notre invitation expresse</strong>.</p>

    <section class="info">
        <article>
            <header>Quand ?</header>
            <p>Du {{ start_date.day if start_date.month == end_date.month or start_date.strftime('%#d %B') }} au {{ end_date.strftime('%#d %B %Y') }}.</p>
            <p class="mb-0">Aucune obligation de présence évidemment : vous venez et repartez quand vous voulez.</p>
        </article>
        <article>
            <header>Où ?</header>
            <p class="mb-0">C'est en cours de définition, mais cela se passera dans l'une des villes de {{ locations|selectattr('@type', 'eq', 'City')|join(', ', attribute='name') }}.</p>
        </article>
        <article>
            <header>Qui ?</header>
            <p class="mb-0">À ce jour (3 mars), il est prévu {{ current_attendees }} joueurs.</p>
        </article>
        <article>
            <header>Combien ?</header>
            <p class="mb-0">Les frais (location des lieux, nourriture, boissons et une partie des frais de déplacement de joueurs qui viennent de très loin) sont répartis équitablement entre tous les participants.</p>
        </article>
        <article class="lan-games">
            <header>Quels jeux ?</header>

            {% if lan_games %}
                <div class="games">
                    {% with games = lan_games %}
                        {% include '_games.html' %}
                    {% endwith %}
                </div>

                <p class="mb-0">Cette liste n'est évidemment pas figée ni exhaustive, rien n'empêche plusieurs joueurs de lancer spontanément une partie sur un jeu qui n'est pas listé.</p>
            {% else %}
                <p class="mb-0">À définir.</p>
            {% endif %}
        </article>
    </section>

    <section class="mb-0">
        <h2>Précédentes éditions</h2>

        <details class="mb-0">
            <summary role="button" class="outline secondary">2023</summary>

            <p class="mb-0">Cette première édition s'est déroulée du 28 octobre au 1er novembre à Amilly (à côté de Montargis, au sud de Paris). Nous étions 6 joueurs, et avions joué à Killing Floor 2, Rocket League, PUBG, RUNNING WITH RIFLES, Call to Arms, Satisfactory, Keep Talking and Nobody Explodes (VR), Arizona Sunshine (VR) et Age of Empires II. Nous avions loué une maison entière, nous avions donc tout à disposition sur place (couchage, cuisine, etc).</p>
        </details>
    </section>
{% endblock %}
